---
layout: page
permalink: /lab/render-changelog
---
<script>
(function() {
    var version = $.getParam('version') || $.getParam('v');
    if(version == undefined) {
        $.writeJSON({
            'error': 'Undefined client version. Use either 0.1.1, 0.1.2, 0.2.0, 0.2.1, 1.1.5, 1.2.0.7, 1.2.0.9.',
            'example': 'http://pe.thediamondyt.tk/render-changelog?v=0.1.1',
        });
        $.writeJSON({'description': 'This fetches and parses the changelog JSON stored in my API.'});
        return;
    }
    var changelog = $.getJSON('http://peapi.thediamondyt.tk/v/' + version + '/changelog.json', function(data) {
        if(data.additions != undefined) {
            $('#body').append('<h1>Additions</h1>');
            $.each(data.additions, function(key, value) {
                $('#body').append('<li>' + value.text + '</li>');
            });
        }
        if(data.changes != undefined) {
            $('#body').append('<h1>Changes</h1>');
            $.each(data.changes, function(key, value) {
                $('#body').append('<li>' + value.text + '</li>');
            });
        }
        if(data.fixes != undefined) {
            $('#body').append('<h1>Fixes</h1>');
            $.each(data.fixes, function(key, value) {
                $('#body').append('<li>' + value.text + '</li>');
            });
        }
        $('#body').append('<hr>');
        $('#body').append('<a href="' + data.source + '">Source</a>');
    })
    .fail(function() {
        $.error('JSON fetch failed. Check the specified client version exists.');
    });
})();
</script>
